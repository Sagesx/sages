<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pokémon Masters EX Battle Info</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>Pokémon Masters Event & Battle Challenges Info</h1>
    <p>Search and explore data from past boss battles</p>
  </header>
  <section class="details-section">
    <h1 id="title">Text</h1>
    <h4>Completion Missions:</h4>
    <ul id="missions">
      <li>data</li>
      <li>data</li>
    </ul>
    <h4>Schedule:</h4>
    <ul id="schedule">
      <li>data</li>
      <li>data</li>
    </ul>
    <div class="opponents">
      <!--
      ////////////////////////////////////////////////////////////////////////////////
                  LEFT OPPONENT   LEFT OPPONENT   LEFT OPPONENT
      ////////////////////////////////////////////////////////////////////////////////
      -->     
      <div id="opp_left-type">
        <div class="container">
          <img id="opp_left-trainer" class="circular-square shrink shade" src="images/trainer/">
          <h2 id="opp_left-name" class="syncpairtitle">Character & Pokemon</h2>
          <img id="opp_left-pokemon" class="circular-square shrinkhalf shade" src="images/pokemon/00003_venusaur.png">
        </div>
        <div class="container">
          <table class="stat-table">
            <tr><td>Stat</td><td>Value</td><td>Mitigation</td></tr>
            <tr><td>HP</td><td id="opp_left-hp">???</td><td>-</td></tr>
            <tr><td>Attack</td><td id="opp_left-atk">???</td><td id="opp_left-atk-mit">?</td></tr>
            <tr><td>Defense</td><td id="opp_left-def">???</td><td id="opp_left-def-mit">?</td></tr>
            <tr><td>Sp.Atk</td><td id="opp_left-spa">???</td><td id="opp_left-spa-mit">?</td></tr>
            <tr><td>Sp. Def</td><td id="opp_left-spd">???</td><td id="opp_left-spd-mit">?</td></tr>
            <tr><td>Speed</td><td id="opp_left-spe">???</td><td id="opp_left-spe-mit">?</td></tr>
            <tr><td>Accuracy</td><td>-</td><td id="opp_left-acc-mit">?</td></tr>
            <tr><td>Evasion</td><td>-</td><td id="opp_left-eva-mit">?</td></tr>
          </table>
          <table class="rules-table">
            <tr id="opp_left-weak" class="bg-type-normal"><td colspan="2">Weakness</td><td><img id="opp_left-weakImg" class="shade" src="images/types/32px/normal.png"></td></tr>
            <tr><td><img height="32px" src="images/status/conditionnull.png"></td><td>Resilience</td><td id="opp_left-resil" class="emoji">???</td></tr>
            <tr><td><img height="32px" src="images//status/nododge.png"></td><td>Sure Hit</td><td id="opp_left-gaze" class="emoji">???</td></tr>
          </table>
        </div>
        <table class="status-table">
          <tr><td colspan="8" style="background: #888b85";>Status Effect Mitigation</td></tr>
          <tr>
            <td><img src="images/status/poison.png" width="75%"></td>
            <td><img src="images/status/burn.png" width="75%"></td>
            <td><img src="images/status/paralyze.png" width="75%"></td>
            <td><img src="images/status/freeze.png" width="75%"></td>
            <td><img src="images/status/sleep.png" width="75%"></td>
            <td><img src="images/status/confuse.png" width="75%"></td>
            <td><img src="images/status/flinch.png" width="75%"></td>
            <td><img src="images/status/trap.png" width="75%"></td>
          </tr>
          <tr>
            <td id="opp_left-poison">?</td>
            <td id="opp_left-burn">?</td>
            <td id="opp_left-paralyze">?</td>
            <td id="opp_left-freeze">?</td>
            <td id="opp_left-sleep">?</td>
            <td id="opp_left-confuse">?</td>
            <td id="opp_left-flinch">?</td>
            <td id="opp_left-trap">?</td>
          </tr>
        </table>
        <strong class="syncpairtitle" style="font-size: 1.5em;">Moves</strong>
        <div class="scrollable-box">
          <p id="opp_left-moves" class="plist">Text</p>
        </div>
        <strong class="syncpairtitle" style="font-size: 1.5em;">Skills</strong>
        <div class="scrollable-box">
            <p id="opp_left-skills" class="plist">Text</p>
      </div>
    </div>
      <!--
      ////////////////////////////////////////////////////////////////////////////////
                  CENTER OPPONENT   CENTER OPPONENT   CENTER OPPONENT
      ////////////////////////////////////////////////////////////////////////////////
      -->
      <div id="opp_mid-type">
        <div class="container">
          <img id="opp_mid-trainer" class="circular-square shrink shade" src="images/trainer/"> 
          <h2 id="opp_mid-name" class="syncpairtitle">Character & Pokemon</h2>
          <img id="opp_mid-pokemon" class="circular-square shrinkhalf shade" src="images/pokemon/00003_venusaur.png">
        </div> 
        <div class="container">
          <table class="stat-table">
            <tr><td>Stat</td><td>Value</td><td>Mitigation</td></tr>
            <tr><td>HP</td><td id="opp_mid-hp">???</td><td>-</td></tr>
            <tr><td>Attack</td><td id="opp_mid-atk">???</td><td id="opp_mid-atk-mit">?</td></tr>
            <tr><td>Defense</td><td id="opp_mid-def">???</td><td id="opp_mid-def-mit">?</td></tr>
            <tr><td>Sp.Atk</td><td id="opp_mid-spa">???</td><td id="opp_mid-spa-mit">?</td></tr>
            <tr><td>Sp. Def</td><td id="opp_mid-spd">???</td><td id="opp_mid-spd-mit">?</td></tr>
            <tr><td>Speed</td><td id="opp_mid-spe">???</td><td id="opp_mid-spe-mit">?</td></tr>
            <tr><td>Accuracy</td><td>-</td><td id="opp_mid-acc-mit">?</td></tr>
            <tr><td>Evasion</td><td>-</td><td id="opp_mid-eva-mit">?</td></tr>
          </table>
          <table class="rules-table">
            <tr id="opp_mid-weak" class="bg-type-normal"><td colspan="2">Weakness</td><td><img id="opp_mid-weakImg" class="shade" src="images/types/32px/normal.png"></td></tr>
            <tr><td><img height="32px" src="images/status/conditionnull.png"></td><td>Resilience</td><td id="opp_mid-resil" class="emoji">???</td></tr>
            <tr><td><img height="32px" src="images//status/nododge.png"></td><td>Sure Hit</td><td id="opp_mid-gaze" class="emoji">???</td></tr>
          </table>
        </div>
        <table class="status-table">
          <tr><td colspan="8" style="background: #888b85";>Status Effect Mitigation</td></tr>
          <tr>
            <td><img src="images/status/poison.png" width="75%"></td>
            <td><img src="images/status/burn.png" width="75%"></td>
            <td><img src="images/status/paralyze.png" width="75%"></td>
            <td><img src="images/status/freeze.png" width="75%"></td>
            <td><img src="images/status/sleep.png" width="75%"></td>
            <td><img src="images/status/confuse.png" width="75%"></td>
            <td><img src="images/status/flinch.png" width="75%"></td>
            <td><img src="images/status/trap.png" width="75%"></td>
          </tr>
          <tr>
            <td id="opp_mid-poison">?</td>
            <td id="opp_mid-burn">?</td>
            <td id="opp_mid-paralyze">?</td>
            <td id="opp_mid-freeze">?</td>
            <td id="opp_mid-sleep">?</td>
            <td id="opp_mid-confuse">?</td>
            <td id="opp_mid-flinch">?</td>
            <td id="opp_mid-trap">?</td>
          </tr>
        </table>
        <strong class="syncpairtitle" style="font-size: 1.5em;">Moves</strong>
        <div class="scrollable-box">
          <p id="opp_mid-moves" class="plist">Text</p>
        </div>
        <strong class="syncpairtitle" style="font-size: 1.5em;">Skills</strong>
        <div class="scrollable-box">
            <p id="opp_mid-skills" class="plist">Text</p>
      </div>
      <!--
      ////////////////////////////////////////////////////////////////////////////////
                  RIGHT OPPONENT   RIGHT OPPONENT   RIGHT OPPONENT
      ////////////////////////////////////////////////////////////////////////////////
      -->      
     </div>
      <div id="opp_right-type">
        <div class="container">
          <img id="opp_right-trainer" class="circular-square shrink shade" src="images/trainer/">
          <h2 id="opp_right-name" class="syncpairtitle">Trainer & Pokemon</h2>
          <img id="opp_right-pokemon" class="circular-square shrinkhalf shade" src="images/pokemon/00003_venusaur.png">
        </div>
        <div class="container">
            <table class="stat-table">
              <tr><td>Stat</td><td>Value</td><td>Mitigation</td></tr>
              <tr><td>HP</td><td id="opp_right-hp">???</td><td>-</td></tr>
              <tr><td>Attack</td><td id="opp_right-atk">???</td><td id="opp_right-atk-mit">?</td></tr>
              <tr><td>Defense</td><td id="opp_right-def">???</td><td id="opp_right-def-mit">?</td></tr>
              <tr><td>Sp.Atk</td><td id="opp_right-spa">???</td><td id="opp_right-spa-mit">?</td></tr>
              <tr><td>Sp. Def</td><td id="opp_right-spd">???</td><td id="opp_right-spd-mit">?</td></tr>
              <tr><td>Speed</td><td id="opp_right-spe">???</td><td id="opp_right-spe-mit">?</td></tr>
              <tr><td>Accuracy</td><td>-</td><td id="opp_right-acc-mit">?</td></tr>
              <tr><td>Evasion</td><td>-</td><td id="opp_right-eva-mit">?</td></tr>
            </table>
            <table class="rules-table">
            <tr id="opp_right-weak" class="bg-type-normal"><td colspan="2">Weakness</td><td><img id="opp_right-weakImg" class="shade" src="images/types/32px/normal.png"></td></tr>
            <tr><td><img height="32px" src="images/status/conditionnull.png"></td><td>Resilience</td><td id="opp_right-resil" class="emoji">???</td></tr>
            <tr><td><img height="32px" src="images//status/nododge.png"></td><td>Sure Hit</td><td id="opp_right-gaze" class="emoji">???</td></tr>
            </table>
        </div>
            <table class="status-table">
              <tr><td colspan="8" style="background: #888b85";>Status Effect Mitigation</td></tr>
              <tr>
                <td><img src="images/status/poison.png" width="75%"></td>
                <td><img src="images/status/burn.png" width="75%"></td>
                <td><img src="images/status/paralyze.png" width="75%"></td>
                <td><img src="images/status/freeze.png" width="75%"></td>
                <td><img src="images/status/sleep.png" width="75%"></td>
                <td><img src="images/status/confuse.png" width="75%"></td>
                <td><img src="images/status/flinch.png" width="75%"></td>
                <td><img src="images/status/trap.png" width="75%"></td>
              </tr>
              <tr>
                <td id="opp_right-poison">?</td>
                <td id="opp_right-burn">?</td>
                <td id="opp_right-paralyze">?</td>
                <td id="opp_right-freeze">?</td>
                <td id="opp_right-sleep">?</td>
                <td id="opp_right-confuse">?</td>
                <td id="opp_right-flinch">?</td>
                <td id="opp_right-trap">?</td>
              </tr>
            </table>
        <strong class="syncpairtitle" style="font-size: 1.5em;">Moves</strong>
        <div class="scrollable-box">
          <p id="opp_right-moves" class="plist">Text</p>
        </div>
        <strong class="syncpairtitle" style="font-size: 1.5em;">Skills</strong>
        <div class="scrollable-box">
          <p id="opp_right-skills" class="plist">Text</p>
        </div>
      </div>
    </div>
  </section>
</body>

<script>
  async function fillData() {
    let data = null;
    try {
      const response = await fetch("EBE_SayAlolatoPasiosBest_Looker.json");
      const data = await response.json();

// Helper to render highlightable fields
function renderHighlightable(value) {
  if (typeof value === "object" && value !== null && value.highlight) {
    return `<span class="highlighttext">${value.text}</span>`;
  }
  return typeof value === "object" && value !== null ? value.text : value;
}

// Title & Info
document.getElementById("title").textContent = data.title;
document.getElementById("missions").innerHTML = data.missions
  .map((mission) => `<li>${mission}</li>`)
  .join("");
document.getElementById("schedule").innerHTML = data.schedule
  .map((schedule) => `<li>${schedule}</li>`)
  .join("");

// Opponent Types
document.getElementById("opp_left-type").className = `opponent-card bg-type-${data.left.type}`;
document.getElementById("opp_mid-type").className = `opponent-card bg-type-${data.mid.type}`;
document.getElementById("opp_right-type").className = `opponent-card bg-type-${data.right.type}`;
document.getElementById("opp_left-name").textContent = data.left.title;
document.getElementById("opp_mid-name").textContent = data.mid.title;
document.getElementById("opp_right-name").textContent = data.right.title;
document.getElementById("opp_left-trainer").textContent = data.left.trainer_name;
document.getElementById("opp_mid-trainer").textContent = data.mid.trainer_name;
document.getElementById("opp_right-trainer").textContent = data.right.trainer_name;


// Stats
document.getElementById("opp_left-hp").innerHTML = renderHighlightable(data.left.hp);
document.getElementById("opp_left-atk").innerHTML = renderHighlightable(data.left.atk);
document.getElementById("opp_left-def").innerHTML = renderHighlightable(data.left.def);
document.getElementById("opp_left-spa").innerHTML = renderHighlightable(data.left.spa);
document.getElementById("opp_left-spd").innerHTML = renderHighlightable(data.left.spd);
document.getElementById("opp_left-spe").innerHTML = renderHighlightable(data.left.spe);
document.getElementById("opp_mid-hp").innerHTML = renderHighlightable(data.mid.hp);
document.getElementById("opp_mid-atk").innerHTML = renderHighlightable(data.mid.atk);
document.getElementById("opp_mid-def").innerHTML = renderHighlightable(data.mid.def);
document.getElementById("opp_mid-spa").innerHTML = renderHighlightable(data.mid.spa);
document.getElementById("opp_mid-spd").innerHTML = renderHighlightable(data.mid.spd);
document.getElementById("opp_mid-spe").innerHTML = renderHighlightable(data.mid.spe);
document.getElementById("opp_right-hp").innerHTML = renderHighlightable(data.right.hp);
document.getElementById("opp_right-atk").innerHTML = renderHighlightable(data.right.atk);
document.getElementById("opp_right-def").innerHTML = renderHighlightable(data.right.def);
document.getElementById("opp_right-spa").innerHTML = renderHighlightable(data.right.spa);
document.getElementById("opp_right-spd").innerHTML = renderHighlightable(data.right.spd);
document.getElementById("opp_right-spe").innerHTML = renderHighlightable(data.right.spe);

// Info
document.getElementById("opp_left-weak").className = `${data.left.weakness_class}`;
document.getElementById("opp_mid-weak").className = `${data.mid.weakness_class}`;
document.getElementById("opp_right-weak").className = `${data.right.weakness_class}`;
document.getElementById("opp_left-resil").textContent = data.left.resil;
document.getElementById("opp_mid-resil").textContent = data.mid.resil;
document.getElementById("opp_right-resil").textContent = data.right.resil;
document.getElementById("opp_left-gaze").textContent = data.left.gaze;
document.getElementById("opp_mid-gaze").textContent = data.mid.gaze;
document.getElementById("opp_right-gaze").textContent = data.right.gaze;
document.getElementById("opp_left-weakImg").src = `${data.left.weakness_img}`;
document.getElementById("opp_mid-weakImg").src = `${data.mid.weakness_img}`;
document.getElementById("opp_right-weakImg").src = `${data.right.weakness_img}`;

// Mitigations
document.getElementById("opp_left-atk-mit").innerHTML = renderHighlightable(data.left.atkMit);
document.getElementById("opp_left-def-mit").innerHTML = renderHighlightable(data.left.defMit); 
document.getElementById("opp_left-spa-mit").innerHTML = renderHighlightable(data.left.spaMit);
document.getElementById("opp_left-spd-mit").innerHTML = renderHighlightable(data.left.spdMit);
document.getElementById("opp_left-spe-mit").innerHTML = renderHighlightable(data.left.speMit);
document.getElementById("opp_left-acc-mit").innerHTML = renderHighlightable(data.left.accMit);
document.getElementById("opp_left-eva-mit").innerHTML = renderHighlightable(data.left.evaMit);
document.getElementById("opp_mid-atk-mit").innerHTML = renderHighlightable(data.mid.atkMit);
document.getElementById("opp_mid-def-mit").innerHTML = renderHighlightable(data.mid.defMit); 
document.getElementById("opp_mid-spa-mit").innerHTML = renderHighlightable(data.mid.spaMit);
document.getElementById("opp_mid-spd-mit").innerHTML = renderHighlightable(data.mid.spdMit);
document.getElementById("opp_mid-spe-mit").innerHTML = renderHighlightable(data.mid.speMit);
document.getElementById("opp_mid-acc-mit").innerHTML = renderHighlightable(data.mid.accMit);
document.getElementById("opp_mid-eva-mit").innerHTML = renderHighlightable(data.mid.evaMit);
document.getElementById("opp_right-atk-mit").innerHTML = renderHighlightable(data.right.atkMit);
document.getElementById("opp_right-def-mit").innerHTML = renderHighlightable(data.right.defMit);
document.getElementById("opp_right-spa-mit").innerHTML = renderHighlightable(data.right.spaMit);
document.getElementById("opp_right-spd-mit").innerHTML = renderHighlightable(data.right.spdMit);
document.getElementById("opp_right-spe-mit").innerHTML = renderHighlightable(data.right.speMit);
document.getElementById("opp_right-acc-mit").innerHTML = renderHighlightable(data.right.accMit);
document.getElementById("opp_right-eva-mit").innerHTML = renderHighlightable(data.right.evaMit);

// Status
document.getElementById("opp_left-poison").innerHTML = renderHighlightable(data.left.poison);
document.getElementById("opp_left-burn").innerHTML = renderHighlightable(data.left.burn);
document.getElementById("opp_left-paralyze").innerHTML = renderHighlightable(data.left.paralyze);
document.getElementById("opp_left-freeze").innerHTML = renderHighlightable(data.left.freeze);
document.getElementById("opp_left-sleep").innerHTML = renderHighlightable(data.left.sleep);
document.getElementById("opp_left-confuse").innerHTML = renderHighlightable(data.left.confuse);
document.getElementById("opp_left-flinch").innerHTML = renderHighlightable(data.left.flinch);
document.getElementById("opp_left-trap").innerHTML = renderHighlightable(data.left.trap);
document.getElementById("opp_mid-poison").innerHTML = renderHighlightable(data.mid.poison);
document.getElementById("opp_mid-burn").innerHTML = renderHighlightable(data.mid.burn);
document.getElementById("opp_mid-paralyze").innerHTML = renderHighlightable(data.mid.paralyze);
document.getElementById("opp_mid-freeze").innerHTML = renderHighlightable(data.mid.freeze);
document.getElementById("opp_mid-sleep").innerHTML = renderHighlightable(data.mid.sleep);
document.getElementById("opp_mid-confuse").innerHTML = renderHighlightable(data.mid.confuse);
document.getElementById("opp_mid-flinch").innerHTML = renderHighlightable(data.mid.flinch);
document.getElementById("opp_mid-trap").innerHTML = renderHighlightable(data.mid.trap);
document.getElementById("opp_right-poison").innerHTML = renderHighlightable(data.right.poison);
document.getElementById("opp_right-burn").innerHTML = renderHighlightable(data.right.burn);
document.getElementById("opp_right-paralyze").innerHTML = renderHighlightable(data.right.paralyze);
document.getElementById("opp_right-freeze").innerHTML = renderHighlightable(data.right.freeze);
document.getElementById("opp_right-sleep").innerHTML = renderHighlightable(data.right.sleep);
document.getElementById("opp_right-confuse").innerHTML = renderHighlightable(data.right.confuse);
document.getElementById("opp_right-flinch").innerHTML = renderHighlightable(data.right.flinch);
document.getElementById("opp_right-trap").innerHTML = renderHighlightable(data.right.trap);

// Moves
document.getElementById("opp_left-moves").innerHTML = data.left.moves
  .map(renderHighlightable)
  .join('<br>');

document.getElementById("opp_mid-moves").innerHTML = data.mid.moves
  .map(renderHighlightable)
  .join('<br>');

document.getElementById("opp_right-moves").innerHTML = data.right.moves
  .map(renderHighlightable)
  .join('<br>');

// Skills
document.getElementById("opp_left-skills").innerHTML = data.left.skills
  .map(renderHighlightable)
  .join('<br>');

document.getElementById("opp_mid-skills").innerHTML = data.mid.skills
  .map(renderHighlightable)
  .join('<br>');

document.getElementById("opp_right-skills").innerHTML = data.right.skills
  .map(renderHighlightable)
  .join('<br>');

// After loading data from test.json
const trainerImgEl = document.querySelector('#opp_left_trainer_name'); // Adjust selector if needed

// Load the image map
const imageMapResponse = await fetch('imageMap_trainer.json');
const imageMap = await imageMapResponse.json();

// Helper to find trainer image path
function getTrainerImgSrc(trainerName) {
  for (const region in imageMap) {
    if (imageMap[region][trainerName]) {
      return imageMap[region][trainerName];
    }
  }
  return 'images/trainer/pasio/scottie.png'; // fallback/default
}

// Set the image src for all 3 opponents (TRAINER)
const leftTrainerImg = document.querySelector('#opp_left-trainer');
const midTrainerImg = document.querySelector('#opp_mid-trainer');
const rightTrainerImg = document.querySelector('#opp_right-trainer');

if (leftTrainerImg) leftTrainerImg.src = getTrainerImgSrc(data.left.trainer_name);
if (midTrainerImg) midTrainerImg.src = getTrainerImgSrc(data.mid.trainer_name);
if (rightTrainerImg) rightTrainerImg.src = getTrainerImgSrc(data.right.trainer_name);

// --- DEDICATED SECTION: Set Pokémon images dynamically for each opponent ---
try {
  // Load the Pokémon image map
  const pokeMapResponse = await fetch('imageMap_pokemon.json');
  const pokeMap = await pokeMapResponse.json();

  // Helper to get Pokémon image src from the map
  function getPokemonImgSrc(pokemonName) {
    if (pokeMap[pokemonName]) {
      return pokeMap[pokemonName];
    }
    // fallback/default image if not found
    return 'images/pokemon/00003_venusaur.png';
  }

  // Use unique IDs for Pokémon images
  const leftPokeImg = document.getElementById('opp_left-pokemon');
  const midPokeImg = document.getElementById('opp_mid-pokemon');
  const rightPokeImg = document.getElementById('opp_right-pokemon');

  if (leftPokeImg) leftPokeImg.src = getPokemonImgSrc(data.left.pokemon_name);
  if (midPokeImg) midPokeImg.src = getPokemonImgSrc(data.mid.pokemon_name);
  if (rightPokeImg) rightPokeImg.src = getPokemonImgSrc(data.right.pokemon_name);
} catch (pokeErr) {
  console.error('Failed to load or assign Pokémon images:', pokeErr);
}
      
    } catch (error) {
  console.error("Failed to load stat data:", error);
  if (typeof data !== 'undefined') {
    console.log("Data object at error time:", data);
  } else {
    console.log("Data object is undefined at error time.");
  }
    }
  }

  fillData();

</script>

</html>